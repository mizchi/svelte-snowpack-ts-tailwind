{"/components/block/Button.svelte":"<script lang=\"ts\">\n  import { createEventDispatcher } from \"svelte\";\n  export let text: string;\n  let id: string;\n\n  const dispatch = createEventDispatcher();\n</script>\n\n<div {id} class=\"container\">\n  <button class=\"link\" on:click={() => dispatch(\"click\")}>\n    <!-- <slot /> -->\n    {text}\n  </button>\n</div>\n\n<style>\n  .container {\n    width: 100%;\n    height: 100%;\n    text-align: left;\n    font-size: 12px;\n    line-height: 1.66667;\n  }\n  .link {\n    box-sizing: border-box;\n    display: inline-block;\n    border-radius: 4px;\n    padding: 13px 16px;\n    background-color: #333;\n    color: #eee;\n    text-decoration: none;\n    text-align: center;\n    width: 100%;\n    transition: 0.2s;\n  }\n  .link:hover,\n  .link:focus {\n    opacity: 0.75;\n  }\n</style>\n","/components/block/Image.svelte":"<script lang=\"ts\">\n  export let src: string;\n  export let width: string = \"auto\";\n  export let height: string = \"auto\";\n  export let round: boolean = false;\n  let id: string = \"i\";\n\n  $: radius = round ? \"50%\" : \"0\";\n</script>\n\n<div {id} class=\"container\" style=\"height: {height}; width: {width};\">\n  <img\n    class=\"g\"\n    {src}\n    alt=\"image\"\n    loading=\"lazy\"\n    {width}\n    {height}\n    style=\"border-radius: {radius}\"\n  />\n</div>\n\n<style>\n  .container {\n    width: 100%;\n    height: 100%;\n    margin: 0 auto;\n    text-align: center;\n  }\n</style>\n","/components/block/Text.svelte":"<script lang=\"ts\">\n  export let text: string;\n  const id = `box_${Math.random().toString(32).substring(2)}`;\n</script>\n\n<div class=\"text\" {id}>{text}</div>\n\n<style>\n  .text {\n    display: flex;\n    width: 100%;\n    height: 100%;\n    justify-content: center;\n    align-items: center;\n  }\n</style>\n","/components/Box.svelte":"<script lang=\"ts\">\n  export let style: string = \"\";\n  export let dir: \"column\" | \"row\" = \"row\";\n  export let display: \"inline-flex\" | \"flex\" | \"grid\" = \"flex\";\n  const id = `box_${Math.random().toString(32).substring(2)}`;\n</script>\n\n<div\n  {id}\n  style={`display:${display};\nflex-direction: ${dir};\n${style}\n`}\n>\n  <slot />\n</div>\n","/components/index.ts":"export { default as Route } from \"./Route.svelte\";\n// @ts-ignore\nexport { default as Router, initMemoryRouter } from \"./Router.svelte\";\nexport { default as Modal } from \"./Modal.svelte\";\nexport { default as Box } from \"./Box.svelte\";\nexport { default as Text } from \"./block/Text.svelte\";\nexport { default as Button } from \"./block/Button.svelte\";\nexport { default as Image } from \"./block/Image.svelte\";\n","/components/Modal.svelte":"<script lang=\"ts\">\n  import { createEventDispatcher, onDestroy } from \"svelte\";\n\n  export let width: string = \"auto\";\n  export let height: string = \"auto\";\n  // export let position: string = \"center\";\n  export let opened: boolean;\n  export let fog: boolean = false;\n  export let zIndex: number = 1000;\n\n  const dispatch = createEventDispatcher();\n  const close = () => dispatch(\"close\");\n\n  let modal: HTMLElement | null = null;\n\n  const handle_keydown = (e: any) => {\n    if (e.key === \"Escape\") {\n      close();\n      return;\n    }\n    if (e.key === \"Tab\" && modal) {\n      // trap focus\n      const nodes = modal.querySelectorAll(\"*\");\n      const tabbable = Array.from(nodes).filter(\n        // @ts-ignore\n        (n: HTMLElement) => n.tabIndex >= 0\n      ) as HTMLElement[];\n\n      let index = tabbable.indexOf(document.activeElement as HTMLElement);\n      if (index === -1 && e.shiftKey) index = 0;\n\n      index += tabbable.length + (e.shiftKey ? -1 : 1);\n      index %= tabbable.length;\n\n      tabbable[index].focus();\n      e.preventDefault();\n    }\n  };\n\n  const previously_focused =\n    typeof document !== \"undefined\" && (document.activeElement as HTMLElement);\n\n  if (previously_focused) {\n    onDestroy(() => {\n      previously_focused?.focus();\n    });\n  }\n</script>\n\n<svelte:window on:keydown={handle_keydown} />\n\n{#if opened}\n  {#if fog}\n    <div class=\"modal-background\" on:click={close} />\n  {/if}\n\n  <div\n    class=\"modal\"\n    role=\"dialog\"\n    aria-modal=\"true\"\n    bind:this={modal}\n    style=\"\nwidth:{width};\nheight:{height};\nz-index:{zIndex};\n\"\n  >\n    <slot />\n    <!-- svelte-ignore a11y-autofocus -->\n    <button autofocus on:click={close}> close modal </button>\n  </div>\n{/if}\n\n<style>\n  .modal-background {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.3);\n  }\n  .modal {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    /* width: calc(100vw - 4em); */\n    max-width: 32em;\n    max-height: calc(100vh - 4em);\n    overflow: auto;\n    transform: translate(-50%, -50%);\n    padding: 1em;\n    border-radius: 0.2em;\n    background: white;\n  }\n  button {\n    display: block;\n  }\n</style>\n","/components/Route.svelte":"<script lang=\"ts\">\n  import { getRouterContext } from \"./Router.svelte\";\n  export let path: string;\n  const { currentPath } = getRouterContext();\n</script>\n\n{#if $currentPath === path}\n  <slot />\n{/if}\n","/components/Router.svelte":"<script lang=\"ts\" context=\"module\">\n  import type { Writable } from \"svelte/store\";\n  import { getContext } from \"svelte\";\n  import { writable } from \"svelte/store\";\n\n  export type RouterContext = {\n    __symbol: string;\n    currentPath: Writable<string>;\n    push(path: string): void;\n  };\n\n  const SYMBOL = \"router:\" + Math.random().toString(16);\n  export const getRouterContext = () => getContext<RouterContext>(SYMBOL);\n  export const initMemoryRouter = (initialPath: string = \"/\") => {\n    const currentPath = writable(initialPath);\n    const ctx: RouterContext = {\n      __symbol: SYMBOL,\n      currentPath,\n      push(path: string) {\n        currentPath.set(path);\n      },\n    };\n    return ctx;\n  };\n</script>\n\n<script lang=\"ts\">\n  import { setContext } from \"svelte\";\n\n  export let router: RouterContext;\n  setContext(router.__symbol, router);\n</script>\n\n<slot />\n","/components/routerMod.ts":"import type { Writable } from \"svelte/store\";\nimport { getContext } from \"svelte\";\nimport { writable } from \"svelte/store\";\n\nexport type RouterContext = {\n  __symbol: string;\n  currentPath: Writable<string>;\n  push(path: string): void;\n};\n\nconst SYMBOL = \"router:\" + Math.random().toString(16);\nexport const getRouterContext = () => getContext<RouterContext>(SYMBOL);\nexport const initMemoryRouter = (initialPath: string = \"/\") => {\n  const currentPath = writable(initialPath);\n  const ctx: RouterContext = {\n    __symbol: SYMBOL,\n    currentPath,\n    push(path: string) {\n      currentPath.set(path);\n    },\n  };\n  return ctx;\n};\n","/Main.svelte":"<script lang=\"ts\">\n  import { fade } from \"svelte/transition\";\n  import { onMount } from \"svelte\";\n  import {\n    Router,\n    Route,\n    Modal,\n    Box,\n    Text,\n    Button,\n    Image,\n    initMemoryRouter,\n  } from \"./components/index\";\n  // @ts-ignore\n  const router = initMemoryRouter(\"/\");\n  let opened = true;\n  let close = () => {\n    opened = false;\n  };\n  onMount(() => {});\n</script>\n\n<Router {router}>\n  <Route path=\"/\">\n    <Modal {opened} on:close={close} fog={false}>\n      <Box dir=\"column\" style=\"width: 300px; height: 300px; background: wheat;\">\n        <Box style=\"height: 32px; background: #aaa\">\n          <button on:click={() => router.push(\"/\")}> Index </button>\n          <button on:click={() => router.push(\"/about\")}> About </button>\n        </Box>\n        <Box style=\"height: 150px; background: #bbb\">\n          <Image src=\"https://i.imgur.com/nAnqC.jpg\" />\n        </Box>\n        <Box style=\"flex: 1; background: #aba\">\n          <Box style=\"flex: 1\">\n            <Text text=\"c-1\" />\n          </Box>\n          <Box style=\"flex: 1; background: #dbd\">\n            <Text text=\"c-2\" />\n          </Box>\n        </Box>\n        <Box style=\"height: 50px; background: #ccc\">\n          <Button text=\"Next\" />\n        </Box>\n      </Box>\n    </Modal>\n  </Route>\n  <Route path=\"/about\">\n    <Modal {opened} on:close={close} fog={true}>\n      <div transition:fade>\n        <Box\n          dir=\"column\"\n          style=\"width: 300px; height: 300px; background: wheat;\"\n        >\n          <Box style=\"height: 50px; background: #aaa\">\n            <button on:click={() => router.push(\"/\")}> Index </button>\n            <button on:click={() => router.push(\"/about\")}> About </button>\n          </Box>\n          <Box style=\"height: 100px; background: #ccc\">b</Box>\n          <Box style=\"flex: 1; background: #aba\">\n            <Box style=\"flex: 3\">c-1</Box>\n            <Box style=\"flex: 1; background: #dbd\">c-2</Box>\n          </Box>\n          <Box style=\"height: 50px; background: #999\">d</Box>\n        </Box>\n      </div>\n    </Modal>\n  </Route>\n</Router>\n"}